<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Form - Laflamme Company</title>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/login.css">
</head>

<body>
    <header class="header">
        <div class="logo">
            
            <img src="images/mainimage.jpg" alt="Company Logo" width="100">
        </div>
        <div class="company-name">
            Laflamme company
        </div>
    </header>

    <nav>
        <a href="index.html" class="nav-link">Home</a>
        <a href="products.html" class="nav-link">Products</a>
        <a href="contact.html" class="nav-link">Contact</a>
        <a href="login.html" class="nav-link">Login</a>
    </nav>

    <main id="login-form">
        <section class="login-form" id="login-form">
                <form onSubmit="loginClick(event)">
                    <div class= "container">
                            <label for="username" class="label">Username:</label></th>
                            <input type="text" id="username" name="username" placeholder="Enter your username" required></td>
                    </div>
                    <div>
                            <label for="password" class="label">Password:</label></th>
                            <input type="password" id="password" name="password" placeholder="Enter your password" required></td>
                            <button type="login-btn" class="login-btn" onclick="checkLoginInfo()">Login</button>
                    </div>
                </form>
                <div>
                <label for="sign-up">Not a member?</label>
                <a href = "./signup.html" type="sign-up" class="sign-upbutton">Sign Up</a>
                </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 LaFlamme Company. All Rights Reserved.</p>
    </footer>

    <script>
        const loginPage = document.getElementById('login-form');
var loginNotification = document.createElement("div");
loginNotification.id = "login-box";
loginNotification.style.border = "black solid 2px";
loginNotification.style.background = "#f9f9f9";
loginNotification.style.padding = "10px";
loginNotification.style.margin = "20px";
loginNotification.style.display = "none";
loginNotification.style.color = "black";
loginPage.appendChild(loginNotification);  

async function checkLoginInfo() {
    try{
        var message = document.createElement("p");
        const response =  await fetch("https://jsonplaceholder.typicode.com/users");
        const user = await response.json();

        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        
        var loginBox = document.getElementById("login-box");
        if (loginBox){
            loginBox.innerHTML = '';
        }

        var isValid = false;
        user.forEach(user=>{
            let {name, email} = user;
            if (name == username && email == password){
                isValid = true;
            }
        });
        if (isValid == true){
            message.textContent = "Login Successful!";
        }
        else{
            message.textContent = "Invalid username or password. Please try again.";
        }
        loginBox.appendChild(message);
        loginBox.style.display = "block";
        
    } catch (error) {
        alert('API call unsuccessful:', error);
    }
}

        
    </script>
</body>

</html>



